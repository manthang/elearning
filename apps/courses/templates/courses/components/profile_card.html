{% with u=user_profile|default:request.user %}
<div class="bg-white rounded-2xl border border-gray-200 shadow-sm p-6 h-[230px] flex flex-col">

  <!-- Top Row -->
  <div class="flex items-start justify-between gap-4">
    <div class="flex items-start gap-4 min-w-0">
      <!-- Avatar -->
      <div class="w-14 h-14 rounded-2xl overflow-hidden bg-gray-100 shrink-0 border border-gray-200">
        <img src="{{ u.avatar_url }}"
             class="w-full h-full object-cover"
             alt="Avatar" />
      </div>

      <!-- Name + Role -->
      <div class="min-w-0">
        <h2 class="text-xl font-bold text-gray-900 truncate">
          {{ u.full_name|default:u.username }}
        </h2>

        {% if u.role %}
          <div class="mt-1">
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold border
              {% if u.role == u.Role.TEACHER %}
                bg-blue-50 text-blue-700 border-blue-100
              {% else %}
                bg-slate-100 text-slate-700 border-slate-200
              {% endif %}">
              {% if u.role == u.Role.TEACHER %}Teacher{% else %}Student{% endif %}
            </span>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- Edit Button -->
    <button type="button"
            onclick="openProfileModal()"
            class="shrink-0 inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-gray-200 bg-white
                   text-sm font-semibold text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500"
           viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 20h9"/>
        <path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/>
      </svg>
      <span>Edit</span>
    </button>
  </div>

  <!-- Info Section -->
  <div class="mt-6 space-y-3 text-sm text-gray-700">
    {% if u.location %}
      <div class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400"
             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 10c0 6-8 12-8 12S4 16 4 10a8 8 0 0 1 16 0Z"/>
          <circle cx="12" cy="10" r="3"/>
        </svg>
        <span class="text-gray-600">{{ u.location }}</span>
      </div>
    {% endif %}

    <div class="flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400"
           viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M8 2v4"/><path d="M16 2v4"/>
        <rect width="18" height="18" x="3" y="4" rx="2"/>
        <path d="M3 10h18"/>
      </svg>
      <span class="text-gray-600">
        Joined {{ u.date_joined|date:"F Y" }}
      </span>
    </div>

    <div class="flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400"
           viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="m22 10-10-5L2 10l10 5 10-5Z"/>
        <path d="M6 12v5c0 1 3 3 6 3s6-2 6-3v-5"/>
      </svg>
      <span class="text-gray-600">
        {{ enrolled_count|default:0 }} Enrolled Courses
      </span>
    </div>
  </div>

  <div class="mt-auto"></div>
</div>
{% endwith %}
