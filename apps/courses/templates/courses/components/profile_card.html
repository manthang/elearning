{% with u=user_profile|default:request.user %}
<div class="bg-white rounded-2xl border border-gray-100 shadow-sm p-6 h-[230px] flex flex-col">

  <!-- Header Row -->
  <div class="flex items-start justify-between">

    <div class="flex items-start gap-4">
      <!-- Avatar -->
      <img
        src="{{ u.avatar_url }}"
        class="w-16 h-16 rounded-xl object-cover"
        alt="Avatar"
      />

      <!-- Name + Role -->
      <div>
        <h2 class="text-xl font-bold text-gray-900">
          {{ u.full_name|default:u.username }}
        </h2>

        {% if u.role %}
          <span class="mt-1 inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold
            {% if u.role == u.Role.TEACHER %}
              bg-blue-50 text-blue-700
            {% else %}
              bg-slate-100 text-slate-700
            {% endif %}">
            {% if u.role == u.Role.TEACHER %}Teacher{% else %}Student{% endif %}
          </span>
        {% endif %}
      </div>
    </div>

    <!-- Edit -->
    <button
      type="button"
      onclick="openProfileModal()"
      class="inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-gray-200
             text-sm font-semibold text-gray-700 hover:bg-gray-50 transition">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500"
           viewBox="0 0 24 24" fill="none"
           stroke="currentColor" stroke-width="2">
        <path d="M12 20h9"/>
        <path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/>
      </svg>
      Edit
    </button>
  </div>

  <!-- Meta Info -->
  <div class="mt-8 space-y-4 text-sm text-gray-600">
    {% if u.location %}
      <div class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400"
             viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2">
          <path d="M20 10c0 6-8 12-8 12S4 16 4 10a8 8 0 0 1 16 0Z"/>
          <circle cx="12" cy="10" r="3"/>
        </svg>
        {{ u.location }}
      </div>
    {% endif %}

    <div class="flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400"
           viewBox="0 0 24 24" fill="none"
           stroke="currentColor" stroke-width="2">
        <path d="M8 2v4"/><path d="M16 2v4"/>
        <rect width="18" height="18" x="3" y="4" rx="2"/>
        <path d="M3 10h18"/>
      </svg>
      Joined {{ u.date_joined|date:"F Y" }}
    </div>
  </div>

</div>
{% endwith %}
