<div id="tab-all" class="tab-panel">
  <div class="flex items-start justify-between gap-4">
    <div>
      <p class="mt-1 text-sm text-gray-500">Explore available courses and enroll when ready.</p>
    </div>

    <div class="hidden md:flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-gray-200">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" viewBox="0 0 24 24" fill="none"
           stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
      </svg>
      <input type="text" placeholder="Search courses..."
             class="w-64 text-sm text-gray-700 outline-none bg-transparent"/>
    </div>
  </div>

  <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5">
    {% for c in all_courses %}

      <!-- Entire card clickable -->
      <a href="{% url 'courses:detail' c.id %}"
         class="group relative bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden
                hover:shadow-md hover:border-gray-300 transition block">

      <div class="relative h-40 bg-gray-200 overflow-hidden">
  
        {% if c.thumbnail %}
          <img src="{{ c.thumbnail.url }}"
              class="w-full h-full object-cover"
              alt="{{ c.title }}">
        {% endif %}

        <!-- Enrolled badge -->
        {% if c.is_enrolled %}
          <span class="absolute top-4 right-4 z-10
                      inline-flex items-center px-2.5 py-1 rounded-full
                      bg-emerald-50 text-emerald-700 border border-emerald-100
                      text-xs font-semibold shadow-sm">
            Enrolled
          </span>
        {% endif %}

        <!-- Category badge -->
        {% if c.get_category_display %}
          <span class="absolute bottom-4 left-4
                      inline-flex items-center px-3 py-1 rounded-full
                      bg-white/90 backdrop-blur-sm
                      text-gray-700 text-xs font-semibold
                      border border-gray-200 shadow-sm">
            {{ c.get_category_display }}
          </span>
        {% endif %}

      </div>

        <div class="p-5">
          <!-- Title: 1â€“2 lines max -->
          <h4 class="text-base font-bold text-gray-900 leading-snug line-clamp-2 min-h-[3rem]">
            {{ c.title }}
          </h4>

          <!-- Instructor: 1 line, truncate -->
          <div class="mt-2 text-sm text-gray-600 truncate h-5">
            {% for t in c.teachers %}
                {{ t.full_name|default:t.username }}{% if not forloop.last %}, {% endif %}
            {% empty %}
                <span class="text-gray-400">Instructor TBA</span>
            {% endfor %}
          </div>

          <!-- Ratings: row 4 -->
          <div class="mt-4 flex flex-wrap items-center gap-2">
            {% with avg=c.avg_rating|default:0 count=c.rating_count|default:0 %}
              <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-amber-500" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.61L12 2l2.81 6.63 7.19.61-5.46 4.76 1.64 7.03z"/>
                </svg>
                <span class="text-sm font-semibold text-gray-800">{{ avg|floatformat:1 }}</span>
              </span>

              <span class="inline-flex items-center px-3 py-1.5 rounded-full bg-white border border-gray-200">
                <span class="text-sm text-gray-600">{{ count }} ratings</span>
              </span>
            {% endwith %}
          </div>
        </div>
      </a>

    {% empty %}
      <div class="col-span-full rounded-2xl border border-gray-200 bg-gray-50 p-6 text-sm text-gray-500">
        No courses available right now.
      </div>
    {% endfor %}
  </div>
</div>