{% extends "core/layout.html" %}
{% load humanize %}
{% block content %}

<div class="bg-white rounded-xl border border-gray-200 p-6">

  <!-- Post box -->
  {% if form %}
  <form method="post" class="flex gap-4 mb-6">
    {% csrf_token %}

    <div class="w-12 h-12 rounded-full bg-gray-200 flex-shrink-0"></div>

    <div class="flex-1">
      {{ form.content }}
      <div class="flex justify-end mt-3">
        <button
          type="submit"
          class="flex items-center gap-2 bg-blue-600 text-white px-5 py-2 rounded-xl hover:bg-blue-700"
        >
          âž¤ Post Update
        </button>
      </div>
    </div>
  </form>
  {% endif %}

  <!-- Feed -->
  <div class="space-y-6">
    {% for update in updates %}
    <div class="flex gap-4">

      <div class="w-12 h-12 rounded-full bg-gray-200 flex-shrink-0"></div>

      <div class="flex-1 bg-gray-50 rounded-xl p-4">
        <div class="flex items-center gap-2">
          <span class="font-semibold">
            {{ update.author.get_full_name|default:update.author.username }}
          </span>

          {% if update.author == user %}
          <span class="text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded">
            You
          </span>
          {% endif %}

          <span class="text-xs text-gray-400">
            â€¢ {{ update.created_at|naturaltime }}
          </span>
        </div>

        <p class="mt-2 text-gray-800">
          {{ update.content }}
        </p>

        <div class="flex gap-6 mt-3 text-sm text-gray-500">
          <span>â™¡ {{ update.likes }}</span>
          <span>ðŸ’¬ {{ update.comments }}</span>
        </div>
      </div>

    </div>
    {% empty %}
      <p class="text-gray-400">No updates yet.</p>
    {% endfor %}
  </div>

</div>

{% endblock %}
