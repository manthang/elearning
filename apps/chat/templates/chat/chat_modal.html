<div id="messengerPanel"
     class="fixed inset-0 z-50 hidden bg-black/40"
     onclick="closeMessenger()">

  <div class="absolute right-0 top-0 h-full w-[900px] bg-white shadow-xl flex"
       onclick="event.stopPropagation()">

    <!-- ================= LEFT: CONVERSATIONS ================= -->
    <div class="w-1/3 border-r flex flex-col">

      <div class="flex items-center justify-between p-4 border-b">
        <h2 class="font-semibold text-lg">Messages</h2>
        <button onclick="closeMessenger()" class="text-gray-400 hover:text-gray-600">✕</button>
      </div>

      <div id="conversationList"
           class="flex-1 overflow-y-auto divide-y">
      </div>
    </div>

    <!-- ================= RIGHT: ACTIVE CHAT ================= -->
    <div class="flex-1 flex flex-col">

      <!-- Chat Header -->
      <div class="border-b p-4 flex items-center gap-3">
        <img id="chatAvatar"
             class="w-10 h-10 rounded-full object-cover"
             src=""
             alt="" />
        <div>
          <p id="chatName" class="font-semibold text-sm"></p>
          <p id="chatRole" class="text-xs text-gray-500"></p>
        </div>
      </div>

      <!-- Messages -->
      <div id="chatMessages"
           class="flex-1 overflow-y-auto p-6 space-y-4 bg-gray-50">
      </div>

      <!-- Composer -->
      <form id="chatForm"
            onsubmit="sendMessage(event)"
            class="border-t px-4 py-3 flex items-center gap-3">

        <input id="chatInput"
               type="text"
               placeholder="Type your message..."
               autocomplete="off"
               class="flex-1 border rounded-lg px-4 py-2 text-sm"
               required />

        <button type="submit"
                class="bg-blue-600 text-white px-4 py-2 rounded-lg">
          ➤
        </button>
      </form>

    </div>
  </div>
</div>

<!-- MESSAGE TEMPLATES -->
<template id="messageMine">
  <div class="flex justify-end">
    <div class="bg-blue-600 text-white px-4 py-2 rounded-2xl max-w-[70%]">
      <p class="text-sm message-text"></p>
      <p class="text-xs mt-1 text-blue-100 text-right message-time"></p>
    </div>
  </div>
</template>

<template id="messageOther">
  <div class="flex justify-start">
    <div class="bg-white border px-4 py-2 rounded-2xl max-w-[70%]">
      <p class="text-sm message-text"></p>
      <p class="text-xs mt-1 text-gray-400 text-right message-time"></p>
    </div>
  </div>
</template>
