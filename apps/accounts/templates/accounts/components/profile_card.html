{% with u=profile_user %}
<div class="bg-white rounded-2xl border border-gray-200 shadow-sm p-6 flex flex-col items-center text-center relative">

  {% if is_own_profile %}
    <button type="button" onclick="openProfileModal()"
            class="absolute top-4 right-4 inline-flex items-center gap-1.5 px-2.5 py-1.5 sm:px-3 sm:py-1.5 rounded-lg bg-white border border-gray-200 text-xs font-semibold text-gray-600 hover:bg-gray-50 hover:text-gray-900 shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 z-10">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/>
      </svg>
      <span class="hidden sm:inline">Edit</span>
    </button>
  {% endif %}

  <div class="relative mb-3 mt-2 sm:mt-0">
    <img src="{{ u.avatar_url }}" class="w-24 h-24 rounded-full object-cover ring-4 ring-gray-50 shadow-sm" alt="Avatar"/>
  </div>

  <h2 class="text-xl font-bold text-gray-900 leading-tight">{{ u.full_name|default:u.username }}</h2>
  
  {% if u.role %}
    <span class="mt-2 inline-flex items-center px-2.5 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wider
                 {% if u.role == u.Role.TEACHER %}bg-blue-50 text-blue-700{% else %}bg-slate-100 text-slate-700{% endif %}">
      {% if u.is_teacher %}Teacher{% else %}Student{% endif %}
    </span>
  {% endif %}

  <div class="mt-5 w-full flex flex-col gap-2.5 text-sm text-gray-500 font-medium">
    {% if u.location %}
      <div class="flex items-center justify-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 10c0 6-8 12-8 12S4 16 4 10a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/>
        </svg>
        <span>{{ u.location }}</span>
      </div>
    {% endif %}
    <div class="flex items-center justify-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
      </svg>
      <span>Joined {{ u.date_joined|date:"M Y" }}</span>
    </div>
  </div>

</div>
{% endwith %}