<div id="searchModal" class="fixed inset-0 z-50 hidden">

  <!-- Overlay -->
  <div class="absolute inset-0 bg-black/30" onclick="closeSearch()"></div>

  <!-- Side panel -->
  <div class="absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-xl flex flex-col">

    <!-- ================= SEARCH VIEW ================= -->
    <div id="searchView" class="flex flex-col h-full">

      <!-- Header -->
      <div class="flex justify-between items-center px-6 py-4 border-b">
        <h2 class="text-lg font-semibold">Search</h2>
        <button onclick="closeSearch()" class="text-xl text-gray-400">Ã—</button>
      </div>

      <!-- Role Tabs -->
      <div class="flex gap-2 px-6 py-3">
        <button id="tabStudent"
                onclick="setSearchRole('student')"
                class="flex-1 py-2 rounded-xl bg-blue-600 text-white font-medium">
          ğŸ“ Students
        </button>
        <button id="tabTeacher"
                onclick="setSearchRole('teacher')"
                class="flex-1 py-2 rounded-xl bg-gray-100 text-gray-600 font-medium">
          ğŸ‘¤ Teachers
        </button>
      </div>

      <!-- Search Input -->
      <div class="px-6">
        <input id="searchInput"
              type="text"
              placeholder="Search by name or email"
              class="w-full border rounded-xl px-4 py-3"
              oninput="searchUsers()" />
      </div>

      <!-- Results -->
      <div id="searchResults"
          class="flex-1 overflow-y-auto px-6 py-4 space-y-3">
      </div>
        <!-- injected by JS -->
    </div>

    <!-- ================= PROFILE VIEW ================= -->
    <div id="profileView" class="hidden flex flex-col h-full">

      <!-- Header -->
      <div class="flex items-center gap-3 px-6 py-4 border-b">
        <button onclick="backToSearch()" class="text-xl">â†</button>
        <h2 class="text-lg font-semibold">User Profile</h2>
      </div>

      <!-- Profile content -->
      <div class="flex-1 overflow-y-auto">

        <!-- Gradient -->
        <div class="h-32 bg-gradient-to-r from-blue-500 to-purple-500"></div>

        <!-- Avatar -->
        <div class="-mt-12 flex justify-center">
          <img id="profileAvatar"
              class="w-24 h-24 rounded-full object-cover border-4 border-white"
              src="" />
        </div>

        <div class="p-6 text-center">
          <h2 id="profileName" class="text-xl font-bold"></h2>
          <p id="profileRole" class="text-gray-500"></p>

          <p id="profileBio" class="text-sm text-gray-600 mt-4"></p>

          <!-- Contact -->
          <div class="mt-6 bg-gray-50 rounded-xl p-4 text-left space-y-2">
            <p><strong>Email:</strong> <span id="profileEmail"></span></p>
            <p><strong>Location:</strong> <span id="profileLocation"></span></p>
            <p><strong>Member since:</strong> <span id="profileJoined"></span></p>
          </div>

          <!-- Stats -->
          <div id="profileStats"
              class="mt-4 bg-blue-50 rounded-xl p-4 hidden text-center">
            <span class="text-2xl font-bold" id="profileCourses"></span><br>
            Enrolled Courses
          </div>

          <!-- Chat button -->
          <div class="flex justify-center mt-4">
            <button
              id="openChatBtn"
              onclick="openMessengerWithUser()"
              class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl flex items-center gap-2"
            >
              ğŸ’¬
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
