<div id="tab-status" class="tab-panel max-w-3xl mx-auto py-4">
  
  <div class="mb-6">
    <h2 class="text-xl font-bold text-gray-900">Course Community</h2>
    <p class="mt-1 text-sm text-gray-500">Share quick updates, ask questions, or discuss course materials.</p>
  </div>

  <div class="bg-white rounded-3xl border border-gray-200 p-5 shadow-sm mb-8">
    <form method="post" action="{% url 'status:post' %}">
      {% csrf_token %}
      <div class="flex gap-4">
        <img src="{{ request.user.avatar_url }}" 
             alt="Your avatar" 
             class="w-12 h-12 rounded-full object-cover shrink-0 border border-gray-100 shadow-sm">
        
        <div class="flex-1">
          <textarea name="content" rows="3" required
                    class="w-full rounded-2xl border-0 bg-gray-50 px-4 py-3 text-gray-900 text-base placeholder-gray-400
                           focus:ring-2 focus:ring-blue-600 focus:bg-white transition resize-none"
                    placeholder="What’s on your mind?"></textarea>

          <div class="mt-3 flex items-center justify-end">
            <button type="submit"
                    class="inline-flex items-center gap-2 px-6 py-2.5 rounded-xl bg-blue-600 text-white
                           text-sm font-bold hover:bg-blue-700 shadow-sm transition">
              Post Update
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>

  <div class="space-y-5">
    {% for s in statuses %}
      <div class="bg-white rounded-3xl border border-gray-100 p-6 shadow-sm hover:shadow-md transition-shadow">
        <div class="flex gap-4">
          
          <img src="{{ s.user.avatar_url }}" 
               alt="{{ s.user.username }}'s avatar" 
               class="w-12 h-12 rounded-full object-cover shrink-0 border border-gray-100 shadow-sm">
          
          <div class="flex-1 min-w-0">
            <div class="flex items-start justify-between gap-4">
              <div>
                <div class="flex items-center gap-2 flex-wrap">
                  <span class="text-base font-bold text-gray-900">
                    {{ s.user.full_name|default:s.user.username }}
                  </span>
                  
                  {% if s.user.is_teacher %}
                    <span class="px-2 py-0.5 rounded text-[10px] font-bold bg-blue-100 text-blue-700 uppercase tracking-widest">Instructor</span>
                  {% endif %}
                  
                  <span class="text-gray-300">•</span>
                  <span class="text-sm font-medium text-gray-500">{{ s.created_at|timesince }} ago</span>
                </div>
              </div>

              {% if s.user_id == request.user.id %}
                <form method="post" action="{% url 'status:delete' s.id %}" onsubmit="return confirm('Are you sure you want to delete this post?');">
                  {% csrf_token %}
                  <button type="submit" title="Delete post"
                          class="w-8 h-8 rounded-full flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 transition">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                  </button>
                </form>
              {% endif %}
            </div>

            <p class="mt-3 text-base text-gray-800 leading-relaxed whitespace-pre-line">{{ s.content }}</p>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="py-16 flex flex-col items-center justify-center text-center bg-white rounded-3xl border border-gray-100 border-dashed">
        <div class="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4 text-blue-500">
          <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"/>
          </svg>
        </div>
        <h4 class="text-base font-bold text-gray-900">No updates yet</h4>
        <p class="text-sm text-gray-500 mt-1 max-w-sm">Be the first to start a conversation with the class!</p>
      </div>
    {% endfor %}
  </div>
</div>